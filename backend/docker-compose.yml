version: '3.8'

services:
  backend:
    build: .
    container_name: heart-monitor-backend
    ports:
      - "39244:39244"
    environment:
      - PYTHONUNBUFFERED=1
    restart: unless-stopped
    volumes:
      # Mount local Python files for live development
      - ./backend_main.py:/app/backend_main.py
      - ./database.py:/app/database.py
      - ./login.py:/app/login.py
      - ./pseudo_data.py:/app/pseudo_data.py
      - ./gemini.py:/app/gemini.py
      # Persist logs and database (use directory for db)
      - ./logs:/app/logs
      - ./data:/app/data
    networks:
      - heart-monitor-network

networks:
  heart-monitor-network:
    driver: bridge
