# ğŸ³ Docker éƒ¨ç½²å®Œæˆé€šçŸ¥

## âœ… å·²å‰µå»ºçš„æ–‡ä»¶

æˆ‘å·²ç¶“ç‚ºä½ å‰µå»ºäº†ä¸€å€‹å®Œæ•´çš„ Docker éƒ¨ç½²æ–¹æ¡ˆï¼ä»¥ä¸‹æ˜¯æ‰€æœ‰ç›¸é—œæ–‡ä»¶ï¼š

### ğŸ”§ æ ¸å¿ƒ Docker æ–‡ä»¶

| æ–‡ä»¶ | ä½ç½® | èªªæ˜ |
|------|------|------|
| `Dockerfile` | `backend/` | Docker æ˜ åƒå®šç¾© |
| `docker-compose.yml` | `backend/` | Docker Compose é…ç½® |
| `.dockerignore` | `backend/` | Docker å»ºç½®æ’é™¤æ–‡ä»¶ |
| `start.sh` | `backend/` | å®¹å™¨å•Ÿå‹•è…³æœ¬ï¼ˆLinuxï¼‰ |
| `requirements.txt` | `backend/` | Python ä¾è³´æ¸…å–®ï¼ˆå·²å­˜åœ¨ï¼‰ |

### ğŸš€ è‡ªå‹•åŒ–è…³æœ¬

| æ–‡ä»¶ | ä½ç½® | èªªæ˜ |
|------|------|------|
| `start-docker.ps1` | æ ¹ç›®éŒ„ | **ä¸€éµå•Ÿå‹•è…³æœ¬**ï¼ˆWindowsï¼‰ |
| `stop-docker.ps1` | æ ¹ç›®éŒ„ | åœæ­¢ Docker è…³æœ¬ï¼ˆWindowsï¼‰ |

### ğŸ“š æ–‡æª”

| æ–‡ä»¶ | ä½ç½® | èªªæ˜ |
|------|------|------|
| `DOCKER_QUICKSTART.md` | æ ¹ç›®éŒ„ | **å¿«é€Ÿé–‹å§‹æŒ‡å—** â­ |
| `DOCKER_GUIDE.md` | æ ¹ç›®éŒ„ | å®Œæ•´éƒ¨ç½²æ–‡æª” |
| `README_DOCKER.md` | `backend/` | Docker å¿«é€Ÿåƒè€ƒ |

## ğŸ¯ ä½¿ç”¨æ–¹å¼ï¼ˆè¶…ç°¡å–®ï¼ï¼‰

### æ–¹å¼ 1: ä½¿ç”¨è‡ªå‹•åŒ–è…³æœ¬ï¼ˆæ¨è–¦ï¼‰â­

```powershell
# åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„åŸ·è¡Œ
.\start-docker.ps1
```

è…³æœ¬æœƒè‡ªå‹•ï¼š
1. âœ… æª¢æŸ¥ Docker ç’°å¢ƒ
2. âœ… å»ºç«‹ä¸¦å•Ÿå‹•å®¹å™¨
3. âœ… å•Ÿå‹• Cloudflare Tunnel
4. âœ… é¡¯ç¤º Tunnel URL
5. âœ… è¤‡è£½ URL åˆ°å‰ªè²¼ç°¿
6. âœ… æä¾›ä¸‹ä¸€æ­¥æŒ‡å¼•

**è¼¸å‡ºç¤ºä¾‹ï¼š**
```
========================================
âœ“ éƒ¨ç½²å®Œæˆï¼
========================================

ğŸ“¡ Cloudflare Tunnel URL:
   https://xxxxx-xxx-xxx.trycloudflare.com
âœ“ URL å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼

ğŸ”§ æœ¬åœ° URL:
   http://localhost:5001

========================================
ğŸ“‹ ä¸‹ä¸€æ­¥æ“ä½œï¼š
========================================

1. è¤‡è£½ä¸Šæ–¹çš„ Cloudflare URL
2. æ‰“é–‹ frontend/script.js
3. å°‡ API_BASE_URL æ”¹ç‚ºä¸Šæ–¹çš„ URL
4. åœ¨ç€è¦½å™¨ä¸­é–‹å•Ÿ frontend/index.html
```

### æ–¹å¼ 2: æ‰‹å‹•ä½¿ç”¨ Docker Compose

```powershell
# é€²å…¥ backend ç›®éŒ„
cd backend

# å•Ÿå‹•
docker-compose up --build -d

# æŸ¥çœ‹ URL
docker logs heart-monitor-backend | Select-String trycloudflare

# åœæ­¢
docker-compose down
```

## ğŸ“¦ Docker å®¹å™¨åŒ…å«ä»€éº¼ï¼Ÿ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Docker Container                   â”‚
â”‚                                         â”‚
â”‚  âœ… Python 3.11                         â”‚
â”‚  âœ… Flask Backend                       â”‚
â”‚  âœ… testing_backend.py                  â”‚
â”‚  âœ… Cloudflared (Tunnel)                â”‚
â”‚  âœ… è‡ªå‹•å•Ÿå‹•è…³æœ¬                         â”‚
â”‚                                         â”‚
â”‚  ğŸŒ Port 5001 (Backend)                 â”‚
â”‚  ğŸ”’ HTTPS (Cloudflare Tunnel)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ å·¥ä½œæµç¨‹

```
é–‹ç™¼è€…åŸ·è¡Œ start-docker.ps1
         â†“
Docker å»ºç«‹å®¹å™¨
         â†“
å•Ÿå‹• Flask Backend (Port 5001)
         â†“
å•Ÿå‹• Cloudflare Tunnel
         â†“
å–å¾— HTTPS URL
         â†“
é¡¯ç¤º URL çµ¦é–‹ç™¼è€…
         â†“
é–‹ç™¼è€…æ›´æ–°å‰ç«¯é…ç½®
         â†“
å®Œæˆï¼å¯ä»¥ä½¿ç”¨äº†
```

## ğŸ¨ ç‰¹è‰²åŠŸèƒ½

### 1. è‡ªå‹•åŒ–ç¨‹åº¦æ¥µé«˜
- âœ… ä¸€å€‹å‘½ä»¤å®Œæˆæ‰€æœ‰è¨­ç½®
- âœ… è‡ªå‹•æª¢æŸ¥ç’°å¢ƒ
- âœ… è‡ªå‹•å»ºç«‹å®¹å™¨
- âœ… è‡ªå‹•å•Ÿå‹•æœå‹™
- âœ… è‡ªå‹•ç²å– Tunnel URL
- âœ… è‡ªå‹•è¤‡è£½åˆ°å‰ªè²¼ç°¿

### 2. å‹å–„çš„ç”¨æˆ¶é«”é©—
- âœ… å½©è‰²è¼¸å‡º
- âœ… é€²åº¦é¡¯ç¤º
- âœ… éŒ¯èª¤æç¤º
- âœ… ä¸‹ä¸€æ­¥æŒ‡å¼•
- âœ… å³æ™‚æ—¥èªŒé¸é …

### 3. å®Œæ•´çš„æ–‡æª”
- âœ… å¿«é€Ÿé–‹å§‹æŒ‡å—
- âœ… å®Œæ•´éƒ¨ç½²æ–‡æª”
- âœ… æ•…éšœæ’é™¤æŒ‡å—
- âœ… å¸¸è¦‹å•é¡Œè§£ç­”

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

```powershell
# å•Ÿå‹•ï¼ˆä½¿ç”¨è…³æœ¬ï¼‰
.\start-docker.ps1

# åœæ­¢ï¼ˆä½¿ç”¨è…³æœ¬ï¼‰
.\stop-docker.ps1

# æŸ¥çœ‹æ—¥èªŒ
cd backend
docker-compose logs -f

# é‡æ–°å•Ÿå‹•
docker-compose restart

# æŸ¥çœ‹ç‹€æ…‹
docker ps

# æŸ¥çœ‹ Tunnel URL
docker logs heart-monitor-backend | Select-String trycloudflare

# é€²å…¥å®¹å™¨ï¼ˆé™¤éŒ¯ç”¨ï¼‰
docker exec -it heart-monitor-backend /bin/bash
```

## âš™ï¸ ç³»çµ±éœ€æ±‚

- âœ… Windows 10/11 æˆ– Linux/Mac
- âœ… Docker Desktopï¼ˆWindows/Macï¼‰æˆ– Docker Engineï¼ˆLinuxï¼‰
- âœ… 4GB RAMï¼ˆå»ºè­°ï¼‰
- âœ… ç¶²è·¯é€£æ¥ï¼ˆç”¨æ–¼ Cloudflare Tunnelï¼‰

## ğŸ“Š å„ªå‹¢å°æ¯”

| é …ç›® | å‚³çµ±æ–¹å¼ | Docker æ–¹å¼ |
|------|---------|-------------|
| Python å®‰è£ | âŒ éœ€è¦ | âœ… ä¸éœ€è¦ |
| Flask å®‰è£ | âŒ éœ€è¦ | âœ… ä¸éœ€è¦ |
| Cloudflared å®‰è£ | âŒ éœ€è¦ | âœ… ä¸éœ€è¦ |
| ç’°å¢ƒé…ç½® | âŒ è¤‡é›œ | âœ… è‡ªå‹• |
| è·¨å¹³å° | âŒ å›°é›£ | âœ… å®¹æ˜“ |
| éƒ¨ç½²æ™‚é–“ | â±ï¸ 10-20åˆ†é˜ | â±ï¸ 2-3åˆ†é˜ |
| ä¸€éµå•Ÿå‹• | âŒ ä¸æ”¯æ´ | âœ… æ”¯æ´ |

## ğŸ”’ å®‰å…¨æ€§

- âœ… HTTPS åŠ å¯†ï¼ˆé€šé Cloudflare Tunnelï¼‰
- âœ… ç„¡éœ€é–‹æ”¾é˜²ç«ç‰†ç«¯å£
- âœ… å®¹å™¨éš”é›¢ç’°å¢ƒ
- âœ… è‡ªå‹•æ›´æ–°åŸºç¤æ˜ åƒ

## ğŸ“ å­¸ç¿’è³‡æº

- **å¿«é€Ÿé–‹å§‹**: `DOCKER_QUICKSTART.md` â­
- **å®Œæ•´æŒ‡å—**: `DOCKER_GUIDE.md`
- **Docker åƒè€ƒ**: `backend/README_DOCKER.md`
- **API æ–‡æª”**: `NEW_FEATURES.md`

## ğŸ†˜ é‡åˆ°å•é¡Œï¼Ÿ

1. **æŸ¥çœ‹å¿«é€ŸæŒ‡å—**: `DOCKER_QUICKSTART.md`
2. **æŸ¥çœ‹å®Œæ•´æ–‡æª”**: `DOCKER_GUIDE.md`
3. **æŸ¥çœ‹å®¹å™¨æ—¥èªŒ**: `docker-compose logs -f`
4. **æª¢æŸ¥ Docker ç‹€æ…‹**: `docker ps -a`

## ğŸ“ ä¸‹ä¸€æ­¥

1. âœ… åŸ·è¡Œ `.\start-docker.ps1` å•Ÿå‹•æœå‹™
2. âœ… è¤‡è£½é¡¯ç¤ºçš„ Cloudflare URL
3. âœ… æ›´æ–° `frontend/script.js` çš„ `API_BASE_URL`
4. âœ… é–‹å•Ÿ `frontend/index.html` æ¸¬è©¦

## ğŸ‰ ç¸½çµ

ä½ ç¾åœ¨æ“æœ‰ï¼š
- âœ… å®Œæ•´çš„ Docker éƒ¨ç½²æ–¹æ¡ˆ
- âœ… è‡ªå‹•åŒ–å•Ÿå‹•è…³æœ¬
- âœ… Cloudflare Tunnel æ•´åˆ
- âœ… è©³ç´°çš„æ–‡æª”
- âœ… ä¸€éµå•Ÿå‹•èƒ½åŠ›

**åªéœ€è¦ä¸€å€‹å‘½ä»¤ï¼Œæ•´å€‹å¾Œç«¯ç³»çµ±å°±èƒ½é‹è¡Œèµ·ä¾†ï¼** ğŸš€

---

**æº–å‚™å¥½äº†å—ï¼ŸåŸ·è¡Œ `.\start-docker.ps1` é–‹å§‹å§ï¼** ğŸ¯
